{"version":3,"sources":["components/stop.jsx","service/routeCalculator.js","components/plotter.jsx","data/map.js","App.js","index.js"],"names":["Stop","id","this","props","datalistId","selected","value","list","placeholder","onChange","e","target","options","map","option","label","onClick","onDelete","Component","calculateRoute","fromId","toId","startNode","nodes","endNode","undefined","crowDistance","distanceBetweenNodes","route","distances","previous","unvisited","Set","Object","keys","neighbours","forEach","nodeId","Number","MAX_VALUE","edges","edge","node1","node2","push","size","current","filter","has","reduce","prev","curr","delete","neighbour","jumpDistance","alt","nextId","previousValue","to","from","distance","reverse","previousToRoute","getDijkstraRoute","chalkedDistance","step","xDiff","x","yDiff","y","zDiff","z","Math","sqrt","pow","Plotter","handleChangeStop","index","stopId","getIdFromLabel","state","setState","handleDeleteStop","splice","handleAddStop","prevState","stops","hidden","name","getLabelFromId","renderRouteDetails","Array","length","calculateLeg","leg","stop","find","stopIdFrom","stopIdTo","velour","jacquard","poplin","gathernotch","leewardCrossroads","windwardCrossroads","upperWyroads","lowerWyroads","starboardZeeroads","portZeeroads","hopsack","caves","tambour","App","Fragment","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1d396902.chunk.js","sourcesContent":["import React, { Component } from \"react\";\n\nclass Stop extends Component {\n  render() {\n    const id = this.props.id;\n    const datalistId = id + \"StopOptions\";\n    const selected = this.props.selected;\n    return (\n      <div>\n        <input\n          value={selected}\n          list={datalistId}\n          placeholder=\"Enter stop...\"\n          onChange={(e) => this.props.onChange(id, e.target.value)}\n        />\n        <datalist id={datalistId}>\n          {this.props.options.map((option) => (\n            <option key={option.id} value={option.label} />\n          ))}\n        </datalist>\n        <button onClick={() => this.props.onDelete(id)}>Delete Stop</button>\n      </div>\n    );\n  }\n}\n\nexport default Stop;\n","export function calculateRoute(map, fromId, toId) {\n  const startNode = map.nodes[fromId]\n  const endNode = map.nodes[toId]\n  if (startNode === undefined || endNode === undefined) {\n    return undefined;\n  } else {\n    const crowDistance = distanceBetweenNodes(startNode, endNode)\n    const route = getDijkstraRoute(map, fromId, toId)\n    const chalkedDistance = route.map(step => step.distance).reduce((prev, curr) => prev + curr, 0)\n    return {\n      chalkedDistance,\n      crowDistance,\n      route,\n      from: fromId,\n      to: toId\n    };\n  }\n}\n\nexport function distanceBetweenNodes(node1, node2) {\n  const xDiff = node1.x - node2.x\n  const yDiff = node1.y - node2.y\n  const zDiff = node1.z - node2.z\n  return Math.sqrt(Math.pow(xDiff, 2) + Math.pow(yDiff, 2) + Math.pow(zDiff, 2));\n}\n\nfunction getDijkstraRoute(map, fromId, toId) {\n  let distances = {}\n  let previous = {}\n  let unvisited = new Set(Object.keys(map.nodes))\n  let neighbours = {}\n  unvisited.forEach(nodeId => {\n    distances[nodeId] = Number.MAX_VALUE\n    previous[nodeId] = undefined\n    neighbours[nodeId] = []\n  })\n  map.edges.forEach(edge => {\n    const node1 = edge[0]\n    const node2 = edge[1]\n    neighbours[node1].push(node2)\n    neighbours[node2].push(node1)\n  })\n\n  distances[fromId] = 0\n\n  while (unvisited.size > 0) {\n    let current = Object.keys(distances)\n      .filter((nodeId) => unvisited.has(nodeId))\n      .reduce((prev, curr) => distances[curr] < distances[prev] ? curr : prev)\n    unvisited.delete(current)\n    for (let neighbour of neighbours[current]) {\n      const jumpDistance = distanceBetweenNodes(map.nodes[current], map.nodes[neighbour])\n      const alt = distances[current] + jumpDistance\n      if (alt < distances[neighbour]) {\n        distances[neighbour] = alt\n        previous[neighbour] = [current, jumpDistance]\n      }\n    }\n  }\n\n  return previousToRoute(previous, toId)\n\n}\n\nfunction previousToRoute(previous, toId) {\n  if (previous[toId] === undefined) {\n    return []\n  } else {\n    let nextId = toId;\n    let route = []\n    while (previous[nextId] !== undefined) {\n      const previousValue = previous[nextId]\n      route.push({\n        to: nextId, from: previousValue[0], distance: previousValue[1]\n      })\n      nextId = previousValue[0]\n    }\n    return route.reverse();\n  }\n}","import React, { Component } from \"react\";\nimport Stop from \"./stop\";\nimport { calculateRoute } from \"../service/routeCalculator\";\n\nclass Plotter extends Component {\n  constructor(props) {\n    super(props);\n    const map = props.map;\n    const nodes = props.map.nodes;\n    const stops = Object.keys(nodes)\n      .filter((nodeId) => !nodes[nodeId].hidden)\n      .map((nodeId) => {\n        return {\n          id: nodeId,\n          label: nodes[nodeId].name,\n        };\n      });\n    const route = [\"\", \"\"];\n    this.state = {\n      map,\n      stops,\n      route,\n      distance: 0,\n    };\n  }\n\n  render() {\n    const route = this.state.route;\n\n    return (\n      <div>\n        <ul>\n          {route.map((stopId, index) => (\n            <Stop\n              key={index}\n              id={index}\n              options={this.state.stops}\n              selected={this.getLabelFromId(stopId)}\n              onChange={this.handleChangeStop}\n              onDelete={this.handleDeleteStop}\n            ></Stop>\n          ))}\n        </ul>\n        <button onClick={this.handleAddStop}>Add Stop</button>\n        <ul>{this.renderRouteDetails()}</ul>\n      </div>\n    );\n  }\n\n  renderRouteDetails() {\n    const route = this.state.route;\n    const legs = [...Array(route.length - 1).keys()].map((index) => {\n      return this.calculateLeg(route[index], route[index + 1]);\n    });\n    const filteredLegs = legs.filter((leg) => leg !== undefined);\n\n    return filteredLegs.map((leg) => (\n      <li key={leg.from + leg.to}>\n        {this.getLabelFromId(leg.from) + \" to \" + this.getLabelFromId(leg.to)}\n        <p>Chalked Distance: {leg.chalkedDistance} miles</p>\n        <p>Crow Distance: {leg.crowDistance} miles</p>\n        <p>Route:</p>\n        <ul>\n          {leg.route.map((step) => (\n            <li key={step.from + step.to}>\n              {this.getLabelFromId(step.from)}\n              {\" -> \"}\n              {this.getLabelFromId(step.to)} ({step.distance})\n            </li>\n          ))}\n        </ul>\n      </li>\n    ));\n  }\n\n  handleChangeStop = (index, selected) => {\n    const stopId = this.getIdFromLabel(selected);\n    const route = [...this.state.route];\n    route[index] = stopId;\n    this.setState({ route });\n  };\n\n  getIdFromLabel(label) {\n    const stop = this.state.stops.find((value) => value.label === label);\n    return !!stop ? stop.id : undefined;\n  }\n\n  getLabelFromId(id) {\n    const stop = this.state.stops.find((value) => value.id === id);\n    return !!stop ? stop.label : \"\";\n  }\n\n  handleDeleteStop = (index) => {\n    const route = [...this.state.route];\n    route.splice(index, 1);\n    this.setState({ route });\n  };\n\n  handleAddStop = () => {\n    this.setState((prevState) => ({\n      route: [...prevState.route, \"\"],\n    }));\n  };\n\n  calculateLeg(stopIdFrom, stopIdTo) {\n    return calculateRoute(this.state.map, stopIdFrom, stopIdTo);\n  }\n}\n\nexport default Plotter;\n","const nodes = {\n    velour: { name: \"Velour\", x: 0, y: 0, z: 0, hidden: false },\n    jacquard: { name: \"Jacquard\", x: -321, y: 731, z: 146, hidden: false },\n    poplin: { name: \"Poplin\", x: 282, y: 423, z: 173, hidden: false },\n    gathernotch: { name: \"Gathernotch\", x: 1079, y: 501, z: 589, hidden: false },\n    leewardCrossroads: { name: \"The Leeward Crossroads\", x: 2000, y: 0, z: 0, hidden: false },\n    windwardCrossroads: { name: \"The Windward Crossroads\", x: -2000, y: 0, z: 0, hidden: false },\n    upperWyroads: { name: \"The Upper Wyroads\", x: 0, y: 2000, z: 0, hidden: false },\n    lowerWyroads: { name: \"The Lower Wyroads\", x: 0, y: -2000, z: 0, hidden: false },\n    starboardZeeroads: { name: \"The Starboard Zeeroads\", x: 0, y: 0, z: 2000, hidden: false },\n    portZeeroads: { name: \"The Port Zeeroads\", x: 0, y: 0, z: -2000, hidden: false },\n    hopsack: { name: \"Hopsack\", x: 851, y: 1532, z: -2973, hidden: false },\n    caves: { name: \"The Caves\", x: -1589, y: 1623, z: -963, hidden: true },\n    tambour: { name: \"Tambour\", x: -731, y: -2531, z: 891, hidden: false }\n}\n\nconst edges = [\n    [\"velour\", \"jacquard\"],\n    [\"velour\", \"poplin\"],\n    [\"velour\", \"gathernotch\"],\n    [\"velour\", \"upperWyroads\"],\n    [\"velour\", \"lowerWyroads\"],\n    [\"velour\", \"windwardCrossroads\"],\n    [\"velour\", \"leewardCrossroads\"],\n    [\"velour\", \"starboardZeeroads\"],\n    [\"velour\", \"portZeeroads\"],\n    [\"poplin\", \"gathernotch\"],\n    [\"portZeeroads\", \"hopsack\"],\n    [\"lowerWyroads\", \"tambour\"]\n]\n\nconst map = {\n    nodes,\n    edges\n}\n\nexport default map;","import React, { Component } from 'react';\nimport './App.css';\nimport Plotter from './components/plotter'\nimport map from './data/map'\n\nclass App extends Component {\n  state = {\n    map\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <nav>\n          Seam Navigator\n        </nav>\n        <main>\n          <Plotter map={map}></Plotter>\n        </main>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}